

var user = sessionStorage.getItem('user');



//localStorage.setItem(`${user}`, `${user}`);

//localStorage.setItem(`${user}1`, `${user}1`);


if (localStorage.getItem(`${user}_score_a4`) != 0) {    //change a>c or 1>2
    window.location.href = `${user}.html`;
    alert('Сіз бұл тестті қайта тапсыра алмайсыз');


}

//let score = 0; //Final result of test
if (!localStorage.getItem(`${user}_score_a4`)) {   //change a>c or 1>2
    localStorage.setItem(`${user}_score_a4`, 0);   //change a>c or 1>2
}

let score = localStorage.getItem(`${user}_score_a4`);  //change a>c or 1>2



/* All answer options */
const option1 = document.querySelector('.option1'),
      option2 = document.querySelector('.option2'),
      option3 = document.querySelector('.option3'),
      option4 = document.querySelector('.option4'),
      option5 = document.querySelector('.option5');

/* All our options */
const optionElements = document.querySelectorAll('.option');


const question = document.getElementById('question'),
      numberOfQuestion = document.getElementById('number-of-question'),
      numberOfAllQuestion = document.getElementById('number-of-all-questions');

let indexOfQuestion, //index of current question
    indexOfPage = 0; //index of page

const answersTracker = document.getElementById('answers-tracker');

const btnNext = document.getElementById('btn-next');







const correctAnswer = document.getElementById('correct-answer'),
      numberOfAllQuestions2 = document.getElementById('number-of-all-questions-2'),
      btnTryAgain = document.getElementById('btn-try-again');

const questions = [
    {
        question: 'Сөйлемді сәйкес мағынадағы туынды саны есім сөздерімен толықтырыңыз </br></br> <div class="texts"> Сондықтан да Тектіғұлдың басына біткен [...] мал дейтін мардымды түк те болмаған. </div>',
        options: [
            'A. қонысты',
            'B. киелі',
            'C. берекелі',
            "D. жағымды",
            'E. қонысты',
        ],
        rightAnswer: 2
    },
    {
        question: 'Сөйлемді сәйкес мағынадағы осы шақ етістігімен толықтырыңыз</br></br> <div class="texts"> Бір күні Сәрсенбайдың үйіне ескі жолмен оқыған, дүниеде білмеген нәрселерім жоқ деп дұға қылушы шала надан молда [...].</div>',
        options: [
            'А. келгенін көрдім',
            'В. келген болатын',
            'С. келмекші еккен',
            'D. келіп қонды',
            'Е. келгелі жатыр',
        ],
        rightAnswer: 3
    },
    {
        question: 'Мәтіннің мазмұны бойынша сөйлемді толықтырыңыз. </br></br> <div class="texts"> Кәсіптің [...] Бақытжан жыл сайын 200-300 бас күркетауық бағып, оларды өсіріп, сатып отырды. </div> ',
        options: [
            'А. жолын бөгеген',
            'В. қиындығын білмеген',
            'С. қыр-сырына қаныққан',
            'D. дәмін білмеген',
            'Е. жолын ойлаған',
        ],
        rightAnswer: 2
    },
    {
        question: 'Берілген мәтіннің мақсатын анықтаңыз </br></br> <div class="texts"> Физика - өріс пен заттың жалпы қасиеттерін және олардың қозғалыс заңдарын зерттейтін ғылым. Физика - табиғат жөніндегі жетекші ғылымдардың бірі. Ол басқа да жаратылыстану ғылымдары сияқты ұзақ тарихи даму жолынан өтті. Физика жайлы алғашқы деректер Ежелгі Вавилон, Египет жазбаларында кездеседі. Практикалық талаптардан туған Ежелгі Вавилон, Египет ғылымының теориялық негізгі халық арасына тарамады. Ғылым түгелдей діни абыздар қолында болды. Ежелгі Грек ғалымдары табиғи құбылыстарын «табиғаттан тысқары күштің» әсерінсіз-ақ ғылыми негізде түсіндіруге ерекше мән берді. Ежелгі грек ғалымдары табиғат, негізінен, төрт элементтен тұрады десе, Демокрит І Эпикур, Лукреций дүниенің ең қарапайым кірпіші одан әрі бөлінбейтін бөлшек - атом деп санады. Аристотельдің табиғат жайлы жазған кітабы «Физика» деп аталған. Осыған орай Аристотельді физиканың «негізін қалаушы» деп те айтады. Грек- рим мәдениеті дәуірінде статистиканың қарапайым заңдары, геометриялық оптиканың алғашқы заңдылықтары ашылды. </div>',
        options: [
            'А. ежелгі вавилон, египет жазбаларындағы деректі көрсету',
            'В. Аристотельдің физика ғылымының «негізін қалаушы» екнін көрсету',
            'С. физика ғылымының қалыптасуын қарастыру',
            'D. физика ғылымының дамуын таныту',
            'Е. ежелгі грек ғалымдарының қолжазбаларын жеткізу',
        ],
        rightAnswer: 2
    },

    {
        question: '«Жетекші» сөзіне мағынасы жақын сөзді табыңыз </br></br> <div class="texts"> Физика - өріс пен заттың жалпы қасиеттерін және олардың қозғалыс заңдарын зерттейтін ғылым. Физика - табиғат жөніндегі жетекші ғылымдардың бірі. Ол басқа да жаратылыстану ғылымдары сияқты ұзақ тарихи даму жолынан өтті. Физика жайлы алғашқы деректер Ежелгі Вавилон, Египет жазбаларында кездеседі. Практикалық талаптардан туған Ежелгі Вавилон, Египет ғылымының теориялық негізгі халық арасына тарамады. Ғылым түгелдей діни абыздар қолында болды. Ежелгі Грек ғалымдары табиғи құбылыстарын «табиғаттан тысқары күштің» әсерінсіз-ақ ғылыми негізде түсіндіруге ерекше мән берді. Ежелгі грек ғалымдары табиғат, негізінен, төрт элементтен тұрады десе, Демокрит І Эпикур, Лукреций дүниенің ең қарапайым кірпіші одан әрі бөлінбейтін бөлшек - атом деп санады. Аристотельдің табиғат жайлы жазған кітабы «Физика» деп аталған. Осыған орай Аристотельді физиканың «негізін қалаушы» деп те айтады. Грек- рим мәдениеті дәуірінде статистиканың қарапайым заңдары, геометриялық оптиканың алғашқы заңдылықтары ашылды. </div>',
        options: [
            'А. кейінгі',
            'В. озық',
            'С. жаңа',
            'D. бастаушы',
            'Е. соңғы',
        ],
        rightAnswer: 3
    },
    {
        question: 'Берілген мәтінге сәйкес тақырыпты таңдаңыз </br></br> <div class="texts"> Физика - өріс пен заттың жалпы қасиеттерін және олардың қозғалыс заңдарын зерттейтін ғылым. Физика - табиғат жөніндегі жетекші ғылымдардың бірі. Ол басқа да жаратылыстану ғылымдары сияқты ұзақ тарихи даму жолынан өтті. Физика жайлы алғашқы деректер Ежелгі Вавилон, Египет жазбаларында кездеседі. Практикалық талаптардан туған Ежелгі Вавилон, Египет ғылымының теориялық негізгі халық арасына тарамады. Ғылым түгелдей діни абыздар қолында болды. Ежелгі Грек ғалымдары табиғи құбылыстарын «табиғаттан тысқары күштің» әсерінсіз-ақ ғылыми негізде түсіндіруге ерекше мән берді. Ежелгі грек ғалымдары табиғат, негізінен, төрт элементтен тұрады десе, Демокрит І Эпикур, Лукреций дүниенің ең қарапайым кірпіші одан әрі бөлінбейтін бөлшек - атом деп санады. Аристотельдің табиғат жайлы жазған кітабы «Физика» деп аталған. Осыған орай Аристотельді физиканың «негізін қалаушы» деп те айтады. Грек- рим мәдениеті дәуірінде статистиканың қарапайым заңдары, геометриялық оптиканың алғашқы заңдылықтары ашылды. </div>',
        options: [
            'А. Аристотель',
            'В. физика ғылымы',
            'С. ғылымның пайда болуы',
            'D. алғашқы деректер',
            'Е. геометриялық оптика',
        ],
        rightAnswer: 1
    },
    {
        question: "Берілген мәтіннің мақсатын анықтаңыз </br></br><div class='texts'> Қазіргі кезде химиялық әдістерді пайдаланып өнеркәсіпке қажетті аса таза заттар алу өндірістік мөлшерде жүзеге асырылуда. Халық шаруашылығына қажетті қара және түсті металдарды олардың қосылыстарынан тотықсыздандырып алу тек химиялық өнімдер: күкірт қышқылы, азот қышқылы, тұз қышқылы, сілтілер, сода, сабын, резеңкелер, пластмассалар, каучуктер, жасанды талшықтар, мұнай өнімдерін өндіру, сонымен бірге ауыл шаруашылығына қажетті калий, азот, фосфор тыңайтқыштарын және микротыңайтқыштарын, гербицидтер, тағы басқа өндіру іске асырылады. Химиялық реакцияларды пайдаланып, дәрі-дәрмектер, тау-кен жұмысына қажетті қопырғыш заттар өндіреді. </div>",
        options: [
            'А. химия пәні туралы түсінік беру',
            'В. химиялық реакцияларды пайдалану жайлы ақпарат беру',
            'С. химиялық әдістердің пайдасы туралы ақпарат беру',
            'D. күкірт қышқылының пайдасы жөнінде мәлімет беру',
            'Е. өсімдіктер жайында ақпарат беру',
        ],
        rightAnswer: 2
    },
    {
        question: "«Жасанды» сөзіне мағынасы жақын сөзді табыңыз </br></br><div class='texts'> Қазіргі кезде химиялық әдістерді пайдаланып өнеркәсіпке қажетті аса таза заттар алу өндірістік мөлшерде жүзеге асырылуда. Халық шаруашылығына қажетті қара және түсті металдарды олардың қосылыстарынан тотықсыздандырып алу тек химиялық өнімдер: күкірт қышқылы, азот қышқылы, тұз қышқылы, сілтілер, сода, сабын, резеңкелер, пластмассалар, каучуктер, жасанды талшықтар, мұнай өнімдерін өндіру, сонымен бірге ауыл шаруашылығына қажетті калий, азот, фосфор тыңайтқыштарын және микротыңайтқыштарын, гербицидтер, тағы басқа өндіру іске асырылады. Химиялық реакцияларды пайдаланып, дәрі-дәрмектер, тау-кен жұмысына қажетті қопырғыш заттар өндіреді. </div>",
        options: [
            'А. көшірме',
            'В. жалған',
            'С. табиғи',
            'D. қолдан істелген',
            'Е. түпнұсқа',
        ],
        rightAnswer: 3
    },
    {
        question: "Берілген мәтінге сәйкес тақырыпты таңдаңыз </br></br><div class='texts'> Қазіргі кезде химиялық әдістерді пайдаланып өнеркәсіпке қажетті аса таза заттар алу өндірістік мөлшерде жүзеге асырылуда. Халық шаруашылығына қажетті қара және түсті металдарды олардың қосылыстарынан тотықсыздандырып алу тек химиялық өнімдер: күкірт қышқылы, азот қышқылы, тұз қышқылы, сілтілер, сода, сабын, резеңкелер, пластмассалар, каучуктер, жасанды талшықтар, мұнай өнімдерін өндіру, сонымен бірге ауыл шаруашылығына қажетті калий, азот, фосфор тыңайтқыштарын және микротыңайтқыштарын, гербицидтер, тағы басқа өндіру іске асырылады. Химиялық реакцияларды пайдаланып, дәрі-дәрмектер, тау-кен жұмысына қажетті қопырғыш заттар өндіреді. </div>",
        options: [
            'А. химиялық элементтер',
            'В. химиялық процесстер',
            'С. қазіргі кездегі химияның зерттелуі',
            'D. химиялық әдістердің пайдасы',
            'Е. ғылымның дамуы',
        ],
        rightAnswer: 3
    },
    {
        question: "Берілген мәтіннің мақсатын анықтаңыз </br></br><div class='texts'> Қазіргі кезде мектептерде мүмкіндігі шектеулі балаларды қамқорлыққа алып, олардың қалыптасуына және айығуына мүмкіндік жасап, өз бетімен өмір сүруіне бағыт-бағдар беруге арнайы қажетті білім, білік-дағдысын, тәртібін қалыптастыруға байланысты түрлі шаралар жасалуда. Дамуында әртүрлі ауытқушылығы бар балаларды арнайы оқытуға деген сұраныс, әсіресе, олардың танымдылық процестерін психологиялық жағынан зерттеу қазіргі танда өзекті мәселе болып отыр. Оқыту үрдісінде мұнай балаларға оқу материалын меңгерту үшін мектептер мен мекемелерде арнайы білім саласында инклюзивті білім беру бағыты қолға алынуда. </div>",
        options: [
            'А. инклюзивті білім беруді түсіндіру',
            'В. инклюзивті білім беруді зерттеу',
            'С. инклюзивті білім беруді ұсыну',
            'D. инклюзивті білім беруді сипаттау',
            'Е. инклюзивті білім беруді салыстыру',
        ],
        rightAnswer: 2
    },
    {
       question: "«Мүмкіндігі шектеулі» сөз тіркесінің мағынасы жақын сөзді табыңыз </br></br><div class='texts'> Қазіргі кезде мектептерде мүмкіндігі шектеулі балаларды қамқорлыққа алып, олардың қалыптасуына және айығуына мүмкіндік жасап, өз бетімен өмір сүруіне бағыт-бағдар беруге арнайы қажетті білім, білік-дағдысын, тәртібін қалыптастыруға байланысты түрлі шаралар жасалуда. Дамуында әртүрлі ауытқушылығы бар балаларды арнайы оқытуға деген сұраныс, әсіресе, олардың танымдылық процестерін психологиялық жағынан зерттеу қазіргі танда өзекті мәселе болып отыр. Оқыту үрдісінде мұнай балаларға оқу материалын меңгерту үшін мектептер мен мекемелерде арнайы білім саласында инклюзивті білім беру бағыты қолға алынуда. </div>",
       options: [
            'А. жағдайы төмен',
            'В. ерекше дарынды',
            'С. қабілетті',
            'D. мүгедек',
            'Е. енжар',
        ],
        rightAnswer: 3
    },
    {
       question: "Берілген мәтінге сәйкес тақырыпты таңдаңыз </br></br><div class='texts'> Қазіргі кезде мектептерде мүмкіндігі шектеулі балаларды қамқорлыққа алып, олардың қалыптасуына және айығуына мүмкіндік жасап, өз бетімен өмір сүруіне бағыт-бағдар беруге арнайы қажетті білім, білік-дағдысын, тәртібін қалыптастыруға байланысты түрлі шаралар жасалуда. Дамуында әртүрлі ауытқушылығы бар балаларды арнайы оқытуға деген сұраныс, әсіресе, олардың танымдылық процестерін психологиялық жағынан зерттеу қазіргі танда өзекті мәселе болып отыр. Оқыту үрдісінде мұнай балаларға оқу материалын меңгерту үшін мектептер мен мекемелерде арнайы білім саласында инклюзивті білім беру бағыты қолға алынуда. </div>",
       options: [
            'А. бастапқы білім',
            'В. негізгі білім',
            'С. ортақ білім',
            'D. жалпы білім',
            'Е. арнайы білім',
        ],
        rightAnswer: 4
    },
    {
        question: "Мәтінге сәйкес ақпаратты табыңыз </br></br><div class='texts'> Отын қатты, сұйық және газ тәріздес болып келеді. Сонымен қатар отындарды табиғи және жассанды деп екі түрге бөледі. Табиғи отындардың қатарына ағаш, шымтезек, таскөмірдің түрлері, тақтатас, мұнай, табиғи газдар және тағы басқалары жатады. Ал жасанды отындарды табиғи отындарды қайта өңдеу арқылы алады. Жасанды отындардың қатарына: ағаш көмірі, кокс, мұнай өнімдері - жанар майлар: бензин, керосин, мазут, және қатты отындардан алынатын генератор газы, сулы газдар және басқалары. Табиғи отындар әрқашан да гумостық сүректердің қалдығынан пайда болған өсімдік тектес болып келеді. Екеуінің де құрамында жанатын көміртегі мен сутегінің элементтері кездеседі. Қазіргі кезде негізгі отындардың көзі болып қатты отындар, сұйық отындар және газтәріздес отындар табылады. </div>",
        options: [
            'А. отынның негізгі сипаты оның иілгіштігінде',
            'В. табиғи отындар қазір азайып бара жатыр',
            'С. жасанды отынды ұлғайту арқылы табиғи отынды сақтайды',
            'D. табиғи және жасанды отын құрамында көміртегі мен сутегі бар',
            'Е. отын түрлерін көбейту елдің экономикалық деңгейін анықтайды',
        ],
        rightAnswer: 3
    },
    {
        question: "«Тектес» сөзіне мағынасы жақын сөзді табыңыз </br></br><div class='texts'> Отын қатты, сұйық және газ тәріздес болып келеді. Сонымен қатар отындарды табиғи және жассанды деп екі түрге бөледі. Табиғи отындардың қатарына ағаш, шымтезек, таскөмірдің түрлері, тақтатас, мұнай, табиғи газдар және тағы басқалары жатады. Ал жасанды отындарды табиғи отындарды қайта өңдеу арқылы алады. Жасанды отындардың қатарына: ағаш көмірі, кокс, мұнай өнімдері - жанар майлар: бензин, керосин, мазут, және қатты отындардан алынатын генератор газы, сулы газдар және басқалары. Табиғи отындар әрқашан да гумостық сүректердің қалдығынан пайда болған өсімдік тектес болып келеді. Екеуінің де құрамында жанатын көміртегі мен сутегінің элементтері кездеседі. Қазіргі кезде негізгі отындардың көзі болып қатты отындар, сұйық отындар және газтәріздес отындар табылады. </div>",
        options: [
            'А. жұптас',
            'В. қатарлас',
            'С. сабақтас',
            'D. тұқымдас',
            'Е. үндес',
        ],
        rightAnswer: 3
    },
    {
        question: "Мәтінде берілген ойды әрі қарай жалғастырыңыз: </br>Отынның негізгі құрамы ......... </br></br><div class='texts'> Отын қатты, сұйық және газ тәріздес болып келеді. Сонымен қатар отындарды табиғи және жассанды деп екі түрге бөледі. Табиғи отындардың қатарына ағаш, шымтезек, таскөмірдің түрлері, тақтатас, мұнай, табиғи газдар және тағы басқалары жатады. Ал жасанды отындарды табиғи отындарды қайта өңдеу арқылы алады. Жасанды отындардың қатарына: ағаш көмірі, кокс, мұнай өнімдері - жанар майлар: бензин, керосин, мазут, және қатты отындардан алынатын генератор газы, сулы газдар және басқалары. Табиғи отындар әрқашан да гумостық сүректердің қалдығынан пайда болған өсімдік тектес болып келеді. Екеуінің де құрамында жанатын көміртегі мен сутегінің элементтері кездеседі. Қазіргі кезде негізгі отындардың көзі болып қатты отындар, сұйық отындар және газтәріздес отындар табылады. </div>",
        options: [
            'А. әртүрлі иілгіш заттар',
            'В. жиналмалы, жанатын заттар',
            'С. өсімдік тектес',
            'D. көміртегі, жанатын және жанбайтын заттар',
            'Е. иілгіш, жиналмалы заттар',
        ],
        rightAnswer: 2
    },


];

numberOfAllQuestion.innerHTML = questions.length; // all questions number




const load = () => {
    question.innerHTML = questions[indexOfQuestion].question; //question

    option1.innerHTML = questions[indexOfQuestion].options[0];
    option2.innerHTML = questions[indexOfQuestion].options[1];
    option3.innerHTML = questions[indexOfQuestion].options[2];
    option4.innerHTML = questions[indexOfQuestion].options[3];
    option5.innerHTML = questions[indexOfQuestion].options[4];

    numberOfQuestion.innerHTML = indexOfPage + 1;   // setting page
    indexOfPage++; // increasing index of page
};

let completedAnswers = [];

const randomQuestion = () => {
    let randomNumber = Math.floor(Math.random() * questions.length);
    let hitDuplicate = false;

    if(indexOfPage == questions.length) {
        quizOver();
    } else {
        if(completedAnswers.length > 0) {
            completedAnswers.forEach(item => {
                if(item == randomNumber) {
                    hitDuplicate = true;
                }
            });
            if(hitDuplicate) {
                randomQuestion();
            } else {
                indexOfQuestion = randomNumber;
                load();
            }
        };
        if(completedAnswers.length == 0) {
            indexOfQuestion = randomNumber;
            load();
        }
    };
    completedAnswers.push(indexOfQuestion);
};



const checkAnswer = el => {
    if(el.target.dataset.id == questions[indexOfQuestion].rightAnswer) {
        el.target.classList.add('correct');
        let score = localStorage.getItem(`${user}_score_a4`);  //change a>c or 1>2
        score++;

        updateAnswerTracker('correct');
        localStorage.setItem(`${user}_score_a4`, score);   //change a>c or 1>2

    } else {
        el.target.classList.add('wrong');
        updateAnswerTracker('wrong');

    };
    disabledOptions();
}

const disabledOptions = () => {
    optionElements.forEach(item => {
        item.classList.add('disabled');
        if(item.dataset.id == questions[indexOfQuestion].rightAnswer) {
            item.classList.add('correct');
        }
    })
};

const enableOptions = () => {
    optionElements.forEach(item => {
        item.classList.remove('disabled', 'correct', 'wrong');
        })
};

const answerTracker = () => {
    questions.forEach(() => {
        const div = document.createElement('div');
        answersTracker.appendChild(div);
    })
};

const updateAnswerTracker = status => {
    answersTracker.children[indexOfPage - 1].classList.add(`${status}`);
};

const validate = () => {
    if (!optionElements[0].classList.contains('disabled')) {
        alert('Жауаптардың біреуін таңдау керек');
    } else {
        randomQuestion();
        enableOptions();
    }
};

btnNext.addEventListener('click', validate);

for (option of optionElements) {
    option.addEventListener('click', e => checkAnswer(e));


}

const quizOver = () => {
    document.querySelector('.quiz-over-modal').classList.add('active');
    correctAnswer.innerHTML = localStorage.getItem(`${user}_score_a4`);  //change a>c or 1>2
    numberOfAllQuestions2.innerHTML = questions.length;

}

const tryAgain = () => {
    window.location.href = `${user}.html`;
}

btnTryAgain.addEventListener('click', tryAgain);

counterSec = 10;
counterSec2 = 5;
counterMin = 9;
counterMin2 = 0;



function countSeconds() {
    counterSec--;
    document.querySelector('#counter-seconds').innerHTML = counterSec;
    document.querySelector('#counter-seconds2').innerHTML = counterSec2;
    document.querySelector('#counter-minutes').innerHTML = counterMin;
    document.querySelector('#counter-minutes2').innerHTML = counterMin2;
    if (counterSec < 0 && counterSec2 != 0) {
        counterSec2--;
        counterSec = 10;
        countSeconds();


        //quizOver();
    } else if (counterSec2 == 0 && counterSec < 0) {
        counterMin--;
        document.querySelector('#counter-minutes').innerHTML = counterMin;
        counterSec = 10;
        counterSec2= 5;
        countSeconds();
        if (counterMin < 0) {
            counterMin = 9;
            counterMin2--;
            document.querySelector('#counter-minutes').innerHTML = counterMin2;
        }




        //quizOver();
        //document.querySelector('#counter-seconds').innerHTML = "Время вышло";
        //document.querySelector('#counter-seconds').style.color = "red";
        //document.querySelector('#counter-seconds2').innerHTML = "";
    } else if (counterMin < 0 && counterMin2 == 0) {
           document.querySelector('#counter-seconds').innerHTML = "Уақыт аяқталды";
           counterSec = 0;
           counterSec2 = 0;
           counterMin = 0;
           counterMin2 = 0;
           document.querySelector('#counter-seconds').style.color = "red";
           document.querySelector('#counter-seconds2').innerHTML = "";
           document.querySelector('#counter-minutes').innerHTML = "";
           document.querySelector('#counter-minutes2').innerHTML = "";
           document.querySelector('#double-points').innerHTML = "";
           quizOver();
        }
}




setInterval(countSeconds, 1000);






window.addEventListener('load', () => {
    randomQuestion();
    answerTracker();



});



window.onbeforeunload = function() {
    return false;
}
















